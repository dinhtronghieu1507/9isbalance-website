<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>C√¥ng C·ª• Ph√¢n T√≠ch S·ª©c Kh·ªèe - 9isBalance</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Be+Vietnam+Pro:wght@400;600;700;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-color: #007BFF;
            --secondary-color: #00C6FF;
            --dark-color: #2c3e50;
            --light-color: #ffffff;
            --text-color: #4a4a4a;
            --gray-bg: #f0f4f8;
            --border-radius: 20px;
            --shadow: 0 15px 35px rgba(60, 90, 130, 0.1);
        }
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body {
            font-family: 'Be Vietnam Pro', sans-serif;
            background-color: var(--gray-bg);
            color: var(--text-color);
            line-height: 1.6;
            padding: 10px;
        }
        .wrapper { max-width: 1200px; margin: 0 auto; }
        
        .main-header { display: flex; justify-content: space-between; align-items: center; padding: 10px 20px 30px 20px; }
        .logo { font-size: 1.8em; font-weight: 800; color: var(--dark-color); text-decoration: none; }
        .main-nav a { text-decoration: none; color: var(--dark-color); margin-left: 25px; font-weight: 600; padding: 8px 12px; border-radius: 8px; transition: all 0.3s ease; }
        .main-nav a:hover { color: var(--primary-color); }
        .main-nav a.active { background-image: linear-gradient(45deg, var(--primary-color), var(--secondary-color)); color: var(--light-color); }
        
        .app-grid { display: grid; grid-template-columns: 380px 1fr; gap: 30px; align-items: flex-start; }
        
        .card { background: var(--light-color); border-radius: var(--border-radius); box-shadow: var(--shadow); padding: 30px; }
        
        .calculator-form h1 { font-size: 1.8em; font-weight: 800; color: var(--dark-color); margin-bottom: 25px; }
        .form-group { margin-bottom: 18px; }
        .form-group label { font-weight: 700; color: var(--dark-color); display: flex; align-items: center; margin-bottom: 10px; }
        .form-group label span { margin-right: 8px; font-size: 1.2em; color: var(--primary-color); }
        
        .input-text, .input-select { width: 100%; padding: 12px 15px; border-radius: 10px; border: 1px solid #dfe6e9; font-family: 'Be Vietnam Pro', sans-serif; font-size: 1em; transition: all 0.3s ease; }
        .input-text:focus, .input-select:focus { outline: none; border-color: var(--primary-color); box-shadow: 0 0 0 3px rgba(0, 123, 255, 0.15); }
        .input-radio-group { display: flex; gap: 20px; }
        
        .btn { padding: 14px 30px; border: none; border-radius: 50px; font-size: 1.1em; font-weight: 700; cursor: pointer; transition: all 0.3s ease; width: 100%; background-image: linear-gradient(45deg, var(--primary-color), var(--secondary-color)); color: var(--light-color); box-shadow: 0 8px 20px rgba(0, 123, 255, 0.3); margin-top: 10px; }
        .btn:hover { transform: translateY(-3px); box-shadow: 0 10px 25px rgba(0, 123, 255, 0.4); }

        .results-container { display: none; grid-template-columns: 1fr 1fr; gap: 25px; }
        .results-container.visible { display: grid; }
        .result-card { background: var(--light-color); border-radius: var(--border-radius); box-shadow: var(--shadow); padding: 25px; animation: fadeIn 0.5s ease-out forwards; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        
        .result-card h3 { font-size: 1.1em; font-weight: 700; color: var(--dark-color); margin-bottom: 15px; text-align: center; }
        
        .bmi-card-content { text-align: center; }
        .bmi-main-result { display: flex; justify-content: center; align-items: baseline; margin-bottom: 15px; }
        #bmi-value { font-size: 4em; font-weight: 800; line-height: 1; }
        #bmi-interpretation { font-weight: 700; font-size: 1.5em; margin-left: 10px; }
        .bmi-progress-bar { height: 10px; background-color: #eef5f9; border-radius: 10px; overflow: hidden; position: relative; }
        #bmi-progress-value { height: 100%; width: 0; border-radius: 10px; transition: width 1.5s ease-out, background-color 0.5s ease; }
        .bmi-summary { font-size: 0.9em; margin-top: 10px; }
        .status-underweight { color: #3498db; } .status-normal { color: #28a745; }
        .status-overweight { color: #f1c40f; } .status-obese { color: #e74c3c; }

        .calories-card { background: rgba(44, 62, 80, 0.8); backdrop-filter: blur(10px); color: var(--light-color); display: flex; flex-direction: column; justify-content: center; }
        .tdee-main { text-align: center; margin-bottom: 20px; }
        .tdee-main .icon { font-size: 2em; line-height: 1; opacity: 0.8; }
        .tdee-main .value { font-size: 3.5em; font-weight: 800; color: var(--light-color); line-height: 1.1; }
        .tdee-main .label { font-size: 0.9em; opacity: 0.8; font-weight: 600; }
        .bmr-secondary { text-align: center; border-top: 1px solid rgba(255,255,255,0.1); padding-top: 15px; }
        .bmr-secondary .value { font-size: 1.8em; font-weight: 700; }
        .bmr-secondary .label { font-size: 0.9em; opacity: 0.7; }

        .advice-card, .macros-card, .cta-card { grid-column: 1 / -1; }
        .detail-item { margin-bottom: 15px; }
        .detail-item p { font-size: 0.9em; opacity: 0.9; }
        .detail-item-title { font-size: 1em; font-weight: 700; margin-bottom: 5px; display: flex; align-items: center; }
        .detail-item-title span { margin-right: 8px; }
        .tdee-macro-table { width: 100%; border-collapse: collapse; text-align: center; }
        .tdee-macro-table th, .tdee-macro-table td { padding: 12px; border-bottom: 1px solid var(--gray-bg); }
        .tdee-macro-table th { font-weight: 700; font-size: 0.9em; }
        .tdee-macro-table tr:last-child td { border: none; }
        .tdee-macro-table .goal-col { font-weight: 600; }
        
        .cta-card { background-image: linear-gradient(45deg, var(--primary-color), var(--secondary-color)); color: var(--light-color); text-align: center; }
        .cta-card p { margin-bottom: 15px; font-size: 1.1em; }
        .cta-btn { text-decoration: none; color: var(--primary-color); background: var(--light-color); padding: 10px 25px; border-radius: 50px; font-weight: 700; transition: all 0.3s ease; }
        .cta-btn:hover { transform: scale(1.05); box-shadow: 0 5px 15px rgba(0,0,0,0.1); }
        
        .hidden { display: none; }
        
        /* ===== CSS CHO THI·∫æT B·ªä DI ƒê·ªòNG (ƒê√É T·ªêI ∆ØU) ===== */
        @media (max-width: 900px) {
            .app-grid, .results-container { 
                grid-template-columns: 1fr; /* Chuy·ªÉn th√†nh 1 c·ªôt */
            }
            .advice-card, .macros-card, .cta-card { 
                grid-column: auto; /* X√≥a thu·ªôc t√≠nh g·ªôp c·ªôt */
            }
            .main-header { 
                flex-direction: column; /* X·∫øp logo v√† menu theo chi·ªÅu d·ªçc */
                gap: 20px;
                padding-bottom: 20px;
            }
            .main-nav {
                display: flex;
                flex-wrap: wrap; /* Cho ph√©p menu xu·ªëng d√≤ng n·∫øu kh√¥ng ƒë·ªß ch·ªó */
                justify-content: center;
                gap: 10px;
            }
            .main-nav a {
                margin-left: 0; /* X√≥a kho·∫£ng c√°ch tr√°i c·ªßa menu */
            }
            .card {
                padding: 20px; /* Gi·∫£m padding cho card */
            }
            .calculator-form h1 {
                font-size: 1.6em; /* Gi·∫£m c·ª° ch·ªØ ti√™u ƒë·ªÅ */
            }
        }
    </style>
</head>
<body>
    <div class="wrapper">
        <header class="main-header">
            <a href="index.html" class="logo">9isBalance</a>
            <nav class="main-nav">
                <a href="index.html">Trang ch·ªß</a>
                <a href="gioi-thieu.html">V·ªÅ t√¥i</a>
                <a href="cong-cu-tinh-toan.html" class="active">C√¥ng c·ª• S·ª©c kh·ªèe</a>
                <a href="dang-ky.html">ƒêƒÉng k√Ω</a>
            </nav>
        </header>

        <div class="app-grid">
            <div class="card calculator-form">
                <h1>Ph√¢n T√≠ch S·ª©c Kh·ªèe To√†n Di·ªán</h1>
                <div class="form-group"><label for="gender"><span>üë§</span>Gi·ªõi t√≠nh</label><div class="input-radio-group"><label><input type="radio" name="gender" value="male" checked> Nam</label><label><input type="radio" name="gender" value="female"> N·ªØ</label></div></div>
                <div class="form-group"><label for="age"><span>üéÇ</span>Tu·ªïi</label><input type="number" id="age" class="input-text" value="" min="15" max="100"></div>
                <div class="form-group"><label for="height"><span>üìè</span>Chi·ªÅu cao (cm)</label><input type="number" id="height" class="input-text" value="" min="100" max="220"></div>
                <div class="form-group"><label for="weight"><span>‚öñÔ∏è</span>C√¢n n·∫∑ng (kg)</label><input type="number" id="weight" class="input-text" value="" min="30" max="180"></div>
                <div class="form-group"><label for="bodyfat"><span>üî•</span>T·ª∑ l·ªá m·ª° (%) (T√πy ch·ªçn)</label><input type="number" id="bodyfat" class="input-text" placeholder="ƒê·ªÉ tr·ªëng n·∫øu kh√¥ng bi·∫øt" min="3" max="50"></div>
                <div class="form-group">
                    <label for="activity"><span>üèÉ</span>M·ª©c ƒë·ªô v·∫≠n ƒë·ªông</label>
                    <select id="activity" class="input-select">
                        <option value="1.2">√çt v·∫≠n ƒë·ªông (l√†m vi·ªác vƒÉn ph√≤ng)</option>
                        <option value="1.375" selected>V·∫≠n ƒë·ªông nh·∫π (t·∫≠p 1-3 ng√†y/tu·∫ßn)</option>
                        <option value="1.55">V·∫≠n ƒë·ªông v·ª´a (t·∫≠p 3-5 ng√†y/tu·∫ßn)</option>
                        <option value="1.725">V·∫≠n ƒë·ªông nhi·ªÅu (t·∫≠p 6-7 ng√†y/tu·∫ßn)</option>
                        <option value="1.9">V·∫≠n ƒë·ªông r·∫•t nhi·ªÅu (c∆∞·ªùng ƒë·ªô cao & c√¥ng vi·ªác th·ªÉ ch·∫•t)</option>
                    </select>
                </div>
                <button id="calculate-btn" class="btn">Ph√¢n T√≠ch Ngay</button>
            </div>
            
            <div class="right-panel">
                <div class="card welcome-panel" id="welcome-panel">
                    <div class="icon" style="font-size: 3.5em; line-height: 1; margin-bottom: 15px; background: -webkit-linear-gradient(45deg, var(--primary-color), var(--secondary-color)); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">üí°</div>
                    <h2 style="font-size: 1.5em; font-weight: 700; color: var(--dark-color); margin-bottom: 10px;">B·∫Øt ƒë·∫ßu H√†nh tr√¨nh S·ª©c kh·ªèe</h2>
                    <p style="margin-bottom: 20px;">Nh·∫≠p c√°c th√¥ng s·ªë c·ªßa b·∫°n ƒë·ªÉ nh·∫≠n m·ªôt b·∫£n ph√¢n t√≠ch to√†n di·ªán v√† nh·ªØng l·ªùi khuy√™n ƒë∆∞·ª£c c√° nh√¢n h√≥a, gi√∫p b·∫°n hi·ªÉu r√µ h∆°n v·ªÅ c∆° th·ªÉ m√¨nh.</p>
                    <h3 style="font-size: 1.1em; font-weight: 700; color: var(--dark-color); margin-bottom: 10px;">B·∫°n s·∫Ω nh·∫≠n ƒë∆∞·ª£c:</h3>
                    <ul style="list-style: none; padding-left: 0; text-align: left;">
                        <li style="margin-bottom: 10px; font-weight: 600; display: flex; align-items: center;"><span style="color: var(--primary-color); font-weight: 800; margin-right: 10px;">‚úì</span>Ch·ªâ s·ªë BMI & T√¨nh tr·∫°ng c∆° th·ªÉ</li>
                        <li style="margin-bottom: 10px; font-weight: 600; display: flex; align-items: center;"><span style="color: var(--primary-color); font-weight: 800; margin-right: 10px;">‚úì</span>NƒÉng l∆∞·ª£ng ti√™u th·ª• h√†ng ng√†y (TDEE)</li>
                        <li style="margin-bottom: 10px; font-weight: 600; display: flex; align-items: center;"><span style="color: var(--primary-color); font-weight: 800; margin-right: 10px;">‚úì</span>L·ªùi khuy√™n chi ti·∫øt t·ª´ chuy√™n gia</li>
                        <li style="margin-bottom: 10px; font-weight: 600; display: flex; align-items: center;"><span style="color: var(--primary-color); font-weight: 800; margin-right: 10px;">‚úì</span>G·ª£i √Ω Macros cho t·ª´ng m·ª•c ti√™u</li>
                    </ul>
                </div>

                <div class="results-container" id="results-container">
                    <div class="result-card bmi-card-content">
                        <h3>Ch·ªâ s·ªë BMI</h3>
                        <div class="bmi-main-result">
                            <span id="bmi-value">--</span>
                            <span id="bmi-interpretation"></span>
                        </div>
                        <div class="bmi-progress-bar">
                            <div id="bmi-progress-value"></div>
                        </div>
                        <p class="bmi-summary" id="bmi-summary-text"></p>
                    </div>
                    <div class="result-card calories-card">
                        <div class="tdee-main"><div class="icon">üî•</div><div class="value" id="tdee-value">--</div><div class="label">TDEE (NƒÉng l∆∞·ª£ng Duy tr√¨)</div></div>
                        <div class="bmr-secondary"><div class="label">‚ù§Ô∏è NƒÉng l∆∞·ª£ng C∆° b·∫£n (BMR)</div><div class="value" id="bmr-value">--</div></div>
                    </div>
                    <div class="result-card advice-card">
                        <h3>L·ªùi khuy√™n cho b·∫°n</h3>
                        <div class="detail-item"><h4 class="detail-item-title"><span>üö®</span>M·ª©c ƒë·ªô c·∫£nh b√°o</h4><p id="bmi-warning"></p></div>
                        <div class="detail-item"><h4 class="detail-item-title"><span>üí™</span>H√†nh ƒë·ªông</h4><p id="bmi-action"></p></div>
                        <div class="detail-item"><h4 class="detail-item-title"><span>ü•ó</span>Khuy·∫øn ngh·ªã</h4><p id="bmi-recommendation"></p></div>
                    </div>
                    <div class="result-card macros-card">
                        <h3>B·∫£ng Macros G·ª£i √Ω</h3>
                        <table class="tdee-macro-table">
                            <thead><tr><th>M·ª•c ti√™u</th><th>Calo</th><th>Protein (g)</th><th>Carbs (g)</th><th>Fat (g)</th></tr></thead>
                            <tbody id="macro-results-body"></tbody>
                        </table>
                    </div>
                    <div class="result-card cta-card" id="cta-card">
                        <p id="cta-text"></p>
                        <a href="dang-ky.html" id="cta-link" class="cta-btn"></a>
                    </div>
                </div>
            </div>
        </div>
        <p style="text-align: center; margin-top: 20px; font-size: 0.9em; color: #7f8c8d;">L∆∞u √Ω: C√°c k·∫øt qu·∫£ t√≠nh to√°n ch·ªâ mang t√≠nh ch·∫•t tham kh·∫£o. H√£y li√™n h·ªá chuy√™n gia ƒë·ªÉ c√≥ l·ªùi khuy√™n ch√≠nh x√°c nh·∫•t.</p>
    </div>
    
    <script>
        const calculateBtn = document.getElementById('calculate-btn');
        const welcomePanel = document.getElementById('welcome-panel');
        const resultsContainer = document.getElementById('results-container');

        function animateValue(element, start, end, duration) { /* ... Gi·ªØ nguy√™n h√†m n√†y ... */ }
        function animateDecimal(element, start, end, duration) { /* ... Gi·ªØ nguy√™n h√†m n√†y ... */ }

        calculateBtn.addEventListener('click', () => {
            welcomePanel.style.display = 'none';
            resultsContainer.classList.add('visible');

            const age = parseInt(document.getElementById('age').value);
            const gender = document.querySelector('input[name="gender"]:checked').value;
            const height = parseInt(document.getElementById('height').value);
            const weight = parseFloat(document.getElementById('weight').value);
            const activityMultiplier = parseFloat(document.getElementById('activity').value);
            const bodyFat = parseFloat(document.getElementById('bodyfat').value);

            const bmi = (weight / ((height / 100) * (height / 100)));
            const bmiStatus = getBmiStatus(bmi);
            
            let bmr = 0;
            if (bodyFat && bodyFat > 0) { /* ... Gi·ªØ nguy√™n logic n√†y ... */ } 
            else { /* ... Gi·ªØ nguy√™n logic n√†y ... */ }
            const tdee = bmr * activityMultiplier;
            
            // BMI Card
            const bmiValueEl = document.getElementById('bmi-value');
            const bmiInterpretationEl = document.getElementById('bmi-interpretation');
            const bmiProgressValue = document.getElementById('bmi-progress-value');
            
            animateDecimal(bmiValueEl, 0, bmi, 1500);
            bmiInterpretationEl.textContent = bmiStatus.text;
            bmiInterpretationEl.className = bmiStatus.className;
            document.getElementById('bmi-summary-text').textContent = bmiStatus.summary;

            const bmiPercent = Math.min(100, Math.max(0, ((bmi - 15) / (35 - 15)) * 100));
            setTimeout(() => {
                bmiProgressValue.style.width = `${bmiPercent}%`;
                bmiProgressValue.style.backgroundColor = `var(--${bmiStatus.className})`;
            }, 100);
            
            animateValue(document.getElementById('tdee-value'), 0, Math.round(tdee), 1500);
            animateValue(document.getElementById('bmr-value'), 0, Math.round(bmr), 1500);

            document.getElementById('bmi-warning').textContent = bmiStatus.warning;
            document.getElementById('bmi-action').textContent = bmiStatus.action;
            document.getElementById('bmi-recommendation').textContent = bmiStatus.recommendation;
            
            const macroGoals = {"Gi·∫£m c√¢n (-500)": tdee - 500, "Duy tr√¨": tdee, "TƒÉng c√¢n (+500)": tdee + 500 };
            const macroResultsBody = document.getElementById('macro-results-body');
            macroResultsBody.innerHTML = '';
            for (const goal in macroGoals) {
                const calories = macroGoals[goal];
                const protein = Math.round((calories * 0.30) / 4);
                const carbs = Math.round((calories * 0.40) / 4);
                const fat = Math.round((calories * 0.30) / 9);
                macroResultsBody.innerHTML += `<tr class="goal-col"><td>${goal}</td><td>${Math.round(calories).toLocaleString('vi-VN')}</td><td>${protein}</td><td>${carbs}</td><td>${fat}</td></tr>`;
            }

            document.getElementById('cta-text').textContent = bmiStatus.ctaText;
            document.getElementById('cta-link').textContent = bmiStatus.ctaButton;
            document.getElementById('cta-link').href = bmiStatus.ctaLinkHref;
        });

        function getBmiStatus(bmi) { /* ... Gi·ªØ nguy√™n h√†m n√†y ... */ }
    </script>
</body>
</html>
